## 0. 本資料の位置づけ

本資料は、システムの非機能的な要件を明確化し、設計・開発・運用における指針とするものです。
具体的には...

## 1. 背景・目的

プロジェクトの概要...
非機能要件定義の必要性と対象範囲...

非機能要件の主な目的

- xxxx
- yyyy
- zzzz

## 2. システム範囲

- フロントエンド：railway
- バックエンド：railway
- db：railway
- 認証：firebase

- サブシステム、外部連携

## 3. インフラ概要図

- フロントエンド：railway
- バックエンド：railway
- db：railway
- 認証：firebase

## 4. 想定スケジュール

- 開発・テスト・本番反映のスケジュール
- マイルストーン

## 5. 規模・性能要件

### 5.1 利用者数

- 想定アクティブユーザー数
    - 10000人
- 同時接続数
    - 1000人

### 5.2 データ量

- 初期・年間のデータ増加量見込み
    - 114514MB/年
- ストレージ設計の前提

### 5.3 性能要件

- レスポンスタイムの目標（p95など）
    - 3gでも行ける
- スループット要件（リクエスト/秒）
    - 

### 5.4 主要ミドルウェア

- 利用予定のDB, キャッシュ, メッセージング基盤など
- postgresql

## 6. 可用性・信頼性要件

### 6.1 冗長構成

- マルチAZ/マルチリージョン構成

### 6.2 異常系処理

- インスタンス障害時のフェイルオーバー設計
- リトライ戦略

### 6.3 稼働時間・計画停止

- 93.1%

### 6.4 RPO（復旧時点目標）

- 3.64分

### 6.5 RTO（復旧時間目標）

- 19.19分

### 6.6 使用サービスのSLA

- AWS, Firebase等、使用するサービスのSLA記載

### 6.7 災害対策（DR対策）

- DRサイトの有無、復旧テスト実施方針

## 7. セキュリティ要件

### 7.1 認証

- Firebase Auth
- パスキー対応無

### 7.2 権限・アクセス制御

- 管理者
    - 板の作成・編集
    - アカバン
- 一般
    - 板の閲覧
    - スレッドの閲覧・書き込み
    - レスの閲覧・書き込み

### 7.3 外部攻撃対策

- DDoS対策
- WAF
- Rate Limit
- Bot検出

### 7.4 セキュリティ診断

- 脆弱性スキャン

### 7.5 環境分離

- dev/stg/prod でのアクセス制限とネットワーク分離(しない)
    - 将来的にやりたい

### 7.6 マルウェア・ウイルス対策

- (コンテナイメージのスキャン、Antivirusポリシー)

### 7.7 暗号化

- 通信 SSL/TLS

### 7.8 鍵管理・証明書管理

- (TLS証明書、秘密鍵、APIキーの保管方法)

### 7.9 インシデント対応体制

- セキュリティインシデント発生時の初動・エスカレーション
    - tg→tg
    - アラートとばす。気づいた人が報告→対応

## 8. 運用保守性

### 8.1 バックアップポリシー

- railwayにデプロイしているpostgresqlを一日毎にs3に出力

### 8.2 運用監視

- railwayのメトリクス監視

### 8.3 データ・ログ管理

- ログの保存期間はrailwayに依存

### 8.4 デプロイ

- CI/CDパイプライン→GitHub Actions

### 8.5 IaC

- (Terraform / CloudFormation などの適用範囲)

### 8.6 障害対応フロー

- 環境のクラッシュをdiscordに通知

### 8.7 アラート閾値と対応

- CPU/Memory等の閾値なし！

## 9. テスト・品質戦略

### 9.1 テスト方針

- 単体・結合・E2E・負荷試験めっちゃやる

### 9.2 自動テスト対応

- 単体・結合・E2EをCIへ組み込みたい

## 10. データ移行・互換性

### 10.1 既存データ移行性

- 新規プロジェクトなのでN/Aなど

### 10.2 バージョン互換性

- (APIバージョニング方針、後方互換性の配慮)

## 11. コンプライアンス・法令対応

- 何も考慮しない
- データ削除・匿名化ポリシー、ログ保管期間

## 12. 用語集

-